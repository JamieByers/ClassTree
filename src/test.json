[
  {
    "fileNo": 1,
    "fileName": "/Users/jamiebyers/Documents/Code/Projects/InheritanceTaxHaven/lua/InheritanceTaxHaven/init.lua",
    "lines": [
      [1, "print(\"ITH plugin loaded\")"],
      [2, ""],
      [3, "local M = {}"],
      [4, ""],
      [5, "M.config = {"],
      [6, "    default_filetypes = {"],
      [7, "        \"python\","],
      [8, "        \"lua\","],
      [9, "        \"c\","],
      [10, "        \"cpp\","],
      [11, "        \"java\","],
      [12, "        \"javascript\","],
      [13, "        \"typescript\","],
      [14, "        \"cs\","],
      [15, "        \"objc\","],
      [16, "        \"swift\","],
      [17, "        \"rust\","],
      [18, "        \"go\","],
      [19, "        \"kotlin\","],
      [20, "        \"scala\","],
      [21, "        \"php\","],
      [22, "        \"perl\","],
      [23, "        \"d\","],
      [24, "        \"vala\","],
      [25, "        \"dart\","],
      [26, "        \"haxe\","],
      [27, "        \"zig\","],
      [28, "        \"processing\","],
      [29, "        \"groovy\","],
      [30, "        \"fsharp\","],
      [31, "        \"julia\","],
      [32, "        \"vhdl\","],
      [33, "        \"verilog\","],
      [34, "        \"pascal\","],
      [35, "        \"asm\","],
      [36, "        \"nim\","],
      [37, "        \"ada\","],
      [38, "        \"fortran\","],
      [39, "        \"ocaml\","],
      [40, "        \"coq\","],
      [41, "        \"elixir\","],
      [42, "        \"crystal\","],
      [43, "        \"pony\","],
      [44, "        \"racket\","],
      [45, "        \"scheme\","],
      [46, "        \"bash\","],
      [47, "        \"fish\","],
      [48, "        \"zsh\","],
      [49, "    },"],
      [50, "    filetypes = {},"],
      [51, ""],
      [52, "}"],
      [53, ""],
      [54, "function M.GetRoot()"],
      [55, "    local root = vim.fs.root(0, {"],
      [56, "        \".git\","],
      [57, "    })"],
      [58, ""],
      [59, "    if not root then"],
      [60, "       root = vim.loop.cwd()"],
      [61, "    end"],
      [62, ""],
      [63, "    vim.print(\"Root: \", root)"],
      [64, "   return root"],
      [65, "end"],
      [66, ""],
      [67, ""],
      [68, "function M.IsDir(path)"],
      [69, "    local stat = vim.loop.fs_stat(path)"],
      [70, "    return stat and stat.type == \"directory\""],
      [71, "end"],
      [72, ""],
      [73, "local function contains(l, v)"],
      [74, "   for _, el in ipairs(l) do"],
      [75, "        if el:find(v, 1, true) then"],
      [76, "            return true"],
      [77, "        end"],
      [78, "    end"],
      [79, ""],
      [80, "    return false"],
      [81, "end"],
      [82, ""],
      [83, ""],
      [84, "local function filterFiles(path)"],
      [85, "    local filetype = vim.filetype.match({ filename = path })"],
      [86, "    if filetype and (contains(M.config.default_filetypes, filetype) or contains(M.config.filetypes, filetype)) then"],
      [87, "        return true"],
      [88, "    end"],
      [89, ""],
      [90, "    return false"],
      [91, "end"],
      [92, ""],
      [93, "function M.TraverseFiles(root, paths)"],
      [94, "    local dir = vim.fs.dir(root)"],
      [95, ""],
      [96, "    for path in dir do"],
      [97, "        local full_path = root .. \"/\" .. path"],
      [98, "        if M.IsDir(full_path) and path ~= \".git\" then"],
      [99, "            M.TraverseFiles(full_path, paths)"],
      [100, "        else"],
      [101, "            if filterFiles(path) then"],
      [102, "                table.insert(paths, full_path)"],
      [103, "            end"],
      [104, "        end"],
      [105, "    end"],
      [106, ""],
      [107, "    return paths"],
      [108, "end"],
      [109, ""],
      [110, "local function readFiles(paths)"],
      [111, "    local lines = {}"],
      [112, "    for i, path in ipairs(paths) do"],
      [113, "        local file = io.lines(path)"],
      [114, "        local file_lines = {}"],
      [115, "        if file then"],
      [116, "            local j = 1"],
      [117, "            for line in file do"],
      [118, "                table.insert(file_lines, {j, line})"],
      [119, "                j = j + 1"],
      [120, "            end"],
      [121, "        end"],
      [122, ""],
      [123, "        table.insert(lines, {"],
      [124, "                fileName = path,"],
      [125, "                fileNo = i,"],
      [126, "                lines = file_lines"],
      [127, "        })"],
      [128, ""],
      [129, "    end"],
      [130, ""],
      [131, ""],
      [132, "    return lines"],
      [133, "end"],
      [134, ""],
      [135, "function M.GetFiles()"],
      [136, "    local root = M.GetRoot()"],
      [137, "    local paths = M.TraverseFiles(root, {})"],
      [138, "    local lines = readFiles(paths)"],
      [139, ""],
      [140, "    lines = vim.json.encode(lines)"],
      [141, "    vim.print(\"JSON Lines: \", lines)"],
      [142, "    return lines"],
      [143, "end"],
      [144, ""],
      [145, "vim.api.nvim_create_user_command(\"ITHGetRoot\", M.GetRoot, {})"],
      [146, "vim.api.nvim_create_user_command(\"ITHGetFiles\", M.GetFiles, {})"],
      [147, ""],
      [148, ""],
      [149, "function M.Reload()"],
      [150, "    package.loaded[\"InheritanceTaxHaven\"] = nil"],
      [151, "    require(\"InheritanceTaxHaven\")"],
      [152, "    print(\"ITH reloaded\")"],
      [153, "end"],
      [154, ""],
      [155, "vim.api.nvim_create_user_command(\"ITHReload\", M.Reload, {})"],
      [156, ""],
      [157, ""],
      [158, "vim.api.nvim_create_user_command(\"ITHD\", function()"],
      [159, "    M.Reload()"],
      [160, "    M.GetFiles()"],
      [161, "end, {})"],
      [162, ""],
      [163, ""],
      [164, ""],
      [165, "return M"]
    ]
  }
]

